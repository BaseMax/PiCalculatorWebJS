<!DOCTYPE html>
<html>
    <head>
        <title>Pi Calculator - Online</title>
    </head>
    <body>

        <h1>Pi Calculator - Online</h1>

        <form method="post" action="" onsubmit="test(this.digits.value);return false;">
            Number of Digits:
            <input type="text" name="digits" value="100" size="25" maxlength="25">

            <br>
            <input type="button" value="Calculate Pi" onclick="test(this.form.digits.value);">

            <h4>Output:</h4>
            <div id="log"></div>
            <mark>
                <b id="pi"></b>
            </mark>
        </form>

        <script src="pi.js" type="text/javascript"></script>

        <script type="text/javascript">
        const elm_log = document.querySelector("#log")
        const elm_pi = document.querySelector("#pi")

        const chunk = (str, n) => {
            const chunks = []
            const len = str.length
            for(let i = 0; i < len; i += n)
                chunks.push(str.substr(i, n))
            return chunks
        }

        const test = (digits) => {
            let res = calculate(digits)
            elm_log.innerHTML = `Calculate ${res.digits} digits of PI number in ${res.time} seconds.<br><br>PI(${res.digits}) = <br>\n`

            // elm_pi.innerText = res.pi
            // elm_pi.innerHTML = chunk(res.pi, 50).join(" (50) <br>").trimEnd("(50) <br>")
            elm_pi.innerHTML = chunk(res.pi, 50).join("<br>")
        }
        </script>

    </body>
</html>
